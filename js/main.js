var type="none",lineDrawing=!1,circleDrawing=!1,rectangleDrawing=!1,isDrawing=!1,FX=49,FY=49,MouseLaxtX=-1,MouseLastY=-1,MouseStartX=-1,MouseStartY=-1,content=document.getElementById("id_drw_content");function ABS(e){return e<0&&(e*=-1),e}function MIN(e,t){return e<t?e:t}function MAX(e,t){return t<e?e:t}function Pressed(){var e=parseInt(window.event.clientX)+FX,t=parseInt(window.event.clientY)+FY,n=document.getElementById("id_color").value,r=document.getElementById("id_border").value;"point"==type?content.innerHTML+='<circle cx="'+e+'" cy="'+t+'" r="1" fill="'+n+'"></circle>':"line"==type?(content.innerHTML+='<line x1="'+e+'" y1="'+t+'" x2="'+e+'" y2="'+t+'" stroke="'+n+'" stroke-width="1" id="id_cur_line"></line>',lineDrawing=!0):"draw"==type?(MouseLaxtX=parseInt(e),MouseLastY=parseInt(t),isDrawing=!0):"circle"==type?(MouseStartX=parseInt(e),MouseStartY=parseInt(t),content.innerHTML+='<ellipse cx="'+e+'" cy="'+t+'" rx="1" ry="1" fill="'+r+'" stroke="'+n+'" id="id_cur_circle"></ellipse>',circleDrawing=!0):"rectangle"==type&&(MouseStartX=parseInt(e),MouseStartY=parseInt(t),content.innerHTML+='<rect x="'+e+'" y="'+t+'" width="1" height="1" fill="'+r+'" stroke="'+n+'" id="id_cur_rectangle"></rect>',rectangleDrawing=!0)}function UpdateCircle(e,t){var n=parseFloat(ABS(e-MouseStartX)),r=parseFloat(ABS(t-MouseStartY)),i=parseFloat(MIN(e,MouseStartX))+n/2,e=parseFloat(MIN(t,MouseStartY))+r/2,t=document.getElementById("id_cur_circle");t.setAttribute("cx",i),t.setAttribute("cy",e),t.setAttribute("rx",n/2),t.setAttribute("ry",r/2)}function UpdateRectangle(e,t){var n=MIN(e,MouseStartX),r=MIN(t,MouseStartY),i=parseFloat(ABS(e-MouseStartX)),e=parseFloat(ABS(t-MouseStartY)),t=document.getElementById("id_cur_rectangle");t.setAttribute("x",n),t.setAttribute("y",r),t.setAttribute("width",i),t.setAttribute("height",e)}function Moved(){var e,t=parseInt(window.event.clientX)+FX,n=parseInt(window.event.clientY)+FY,r=document.getElementById("id_color").value;document.getElementById("id_border").value;lineDrawing?((e=document.getElementById("id_cur_line")).setAttribute("x2",t),e.setAttribute("y2",n)):isDrawing?(content.innerHTML+='<line x1="'+MouseLaxtX+'" y1="'+MouseLastY+'" x2="'+t+'" y2="'+n+'" stroke="'+r+'" stroke-width="1"></line>',MouseLaxtX=parseInt(t),MouseLastY=parseInt(n)):circleDrawing?UpdateCircle(t,n):rectangleDrawing&&UpdateRectangle(t,n)}function Released(){var e,t=parseInt(window.event.clientX)+FX,n=parseInt(window.event.clientY)+FY,r=document.getElementById("id_color").value;document.getElementById("id_border").value;"line"==type?(document.getElementById("id_cur_line").setAttribute("id",""),lineDrawing=!1):"draw"==type?(isDrawing=!1,content.innerHTML+='<line x1="'+MouseLaxtX+'" y1="'+MouseLastY+'" x2="'+t+'" y2="'+n+'" stroke="'+r+'" stroke-width="1"></line>',MouseLaxtY=MouseLaxtX=-1):"circle"==type?(circleDrawing=!1,e=document.getElementById("id_cur_circle"),UpdateCircle(t,n),e.setAttribute("id","")):"rectangle"==type&&(rectangleDrawing=!1,e=document.getElementById("id_cur_rectangle"),UpdateRectangle(t,n),e.setAttribute("id",""))}function SetType(e){type="",type+=e}
